# Бот-ассистент для работы с нормативно-методическими документами

[![Python Version](https://img.shields.io/badge/python-3.9+-blue.svg)](https://www.python.org/downloads/)
[![Telegram API](https://img.shields.io/badge/Telegram%20Bot%20API-20.3-blue.svg)](https://core.telegram.org/bots/api)

Телеграм-бот для поиска информации в корпоративных документах с использованием технологии RAG (Retrieval-Augmented Generation). Бот предназначен для сотрудников компании и требует корпоративной почты для доступа.

## Основные функции

- Поиск информации в базе нормативно-методических документов
- Автоматическая генерация ответов на вопросы
- Верификация пользователей по корпоративной почте
- Логирование всех запросов и действий
- Хранение истории вопросов/ответов в базе данных

## Быстрый старт

### Предварительные требования

- Python 3.9 или новее
- Аккаунт в Telegram
- Корпоративная почта `@gazprom-neft.ru`

### Установка

1. Клонируйте репозиторий:

   ```bash
   git clone https://github.com/yourusername/boriy-bot.git
   cd boriy-bot
   ```

2. Установите зависимости:

   ```bash
   pip install -r requirements.txt
   ```

3. Настройте окружение:

   - Создайте файл `.env` в корне проекта.
   - Заполните его по образцу:

     ```ini
     TELEGRAM_TOKEN=your_bot_token
     YANDEX_API_KEY=your_yandex_api_key
     YANDEX_FOLDER_ID=your_folder_id
     DB_HOST=217.114.43.104
     DB_PORT=3306
     DB_USER=seraf
     DB_PASSWORD=ark_wenegreT1
     DB_NAME=boriy_bot
     ```

### Запуск

1. Обработайте документы (выполняется один раз):

   ```bash
   python database.py
   ```

2. Запустите бота:

   ```bash
   python onlybot.py
   ```

## Техническая реализация

### Архитектура проекта

```
.
├── НМД/                   # Исходные PDF-документы
├── VDB/                   # Векторные базы данных (генерируются автоматически)
├── onlybot.py             # Основной скрипт бота (точка входа)
├── query_handler.py       # Обработчик запросов к документам
├── db_handler.py          # Работа с MySQL базой данных
├── logger.py              # Система логирования
├── database.py            # Создание векторных баз из документов
├── requirements.txt       # Зависимости Python
└── README.md              # Документация
```

### Используемые технологии

- **LangChain**: Работа с векторными базами и LLM
- **YandexGPT**: Языковая модель для генерации ответов
- **FAISS**: Эффективный поиск похожих векторов
- **python-telegram-bot**: Взаимодействие с Telegram API
- **MySQL**: Хранение данных пользователей и истории запросов

## Команды бота

| Команда     | Описание                        |
|-------------|---------------------------------|
| `/start`    | Начать работу с ботом          |
| `/question` | Перейти в режим ввода вопроса  |
| `/stop`     | Выйти из режима вопросов       |
| `/info`     | Показать список документов     |

## Доступные документы

Бот работает со следующими документами:

- Положение о Закупках
- Разработка стратегии закупки (Версия: 1.0)
- Требования к порядку рассмотрения, оценки и сопоставления
- Работа с коммерческими предложениями (Версия: 1.0)
- Проведение предквалификации потенциальных участников
- Управление стратегиями закупок (Версия: 1.1)
- Управление эффективностью деятельности контрагента
- Формирование Годового плана закупок (Версия: 3.1)
- Проведение конкурентного отбора (Версия: 3.0)
- Проведение закупки у единственного поставщика/подрядчика
- Проведение безальтернативной закупки (Версия: 2.1)
- Проведение закупок способом маркетинговых исследований
- Формирование и рассмотрение заявок на закупку импортных товаров
- Управление исполнением договорных обязательств

## Ограничения

- Поддерживаются только PDF-документы
- Максимальный размер документа: 10 МБ
- Время обработки запроса: до 1 минуты
- Требуется корпоративная почта `@gazprom-neft.ru`

## Контакты

По вопросам работы бота обращайтесь:

- Email: [it-support@gazprom-neft.ru](mailto:it-support@gazprom-neft.ru)
- [Внутренний портал поддержки](https://internal-portal.gazprom-neft.ru)
